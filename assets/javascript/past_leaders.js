let past_leaders = [
    {
        "id": "1",
        "name": "மு.க.ஸ்டாலின்",
        "to": "07 May 2021",
        "from": "Present",
        "party_name": "திமுக"
    },
    {
        "id": "2",
        "name": "எடப்பாடி கே. பழனிச்சாமி",
        "to": "16 Feb 2017",
        "from": "03 May 2021",
        "party_name": "அதிமுக"
    },
    {
        "id": "3",
        "name": "ஓ.பன்னீர் செல்வம்",
        "to": "06 Dec 2016",
        "from": "15 Feb 2017",
        "party_name": "அதிமுக"
    },
    {
        "id": "4",
        "name": "ஜெ.ஜெயலலிதா",
        "to": "24 May 2016",
        "from": "04 Dec 2016",
        "party_name": "அதிமுக"
    },
    {
        "id": "5",
        "name": "ஜெ. ஜெயலலிதா",
        "to": "23 May 2015",
        "from": "23 May 2016",
        "party_name": "அதிமுக"
    },
    {
        "id": "6",
        "name": "ஜெ. ஜெயலலிதா",
        "to": "29 Sep 2014",
        "from": "22 May 2015",
        "party_name": "அதிமுக"
    },
    {
        "id": "7",
        "name": "ஜெ. ஜெயலலிதா",
        "to": "16 May 2011",
        "from": "27 Sep 2014",
        "party_name": "அதிமுக"
    },
    {
        "id": "8",
        "name": "மு.கருணாநிதி",
        "to": "13 May 2006",
        "from": "15 May 2011",
        "party_name": "திமுக"
    },
    {
        "id": "9",
        "name": "ஜெ. ஜெயலலிதா",
        "to": "02 Mar 2002",
        "from": "12 May 2006",
        "party_name": "அதிமுக"
    },
    {
        "id": "10",
        "name": "ஓ.பன்னீர் செல்வம்",
        "to": "21 Sep 2001",
        "from": "01 Mar 2002",
        "party_name": "அதிமுக"
    },
    {
        "id": "11",
        "name": "ஜெ. ஜெயலலிதா",
        "to": "14 May 2001",
        "from": "21 Sep 2001",
        "party_name": "அதிமுக"
    },
    {
        "id": "12",
        "name": "மு.கருணாநிதி",
        "to": "13 May 1996",
        "from": "13 May 2001",
        "party_name": "திமுக"
    },
    {
        "id": "13",
        "name": "ஜெ. ஜெயலலிதா",
        "to": "24 Jun 1991",
        "from": "13 May 1996",
        "party_name": "அதிமுக"
    },
    {
        "id": "14",
        "name": "ஜனாதிபதி ஆட்சி",
        "to": "30 Jan 1991",
        "from": "24 Jun 1991",
        "party_name": "திமுக"
    },
    {
        "id": "15",
        "name": "மு.கருணாநிதி",
        "to": "27 Jan 1989",
        "from": "30 Jan 1991",
        "party_name": "திமுக"
    },
    {
        "id": "16",
        "name": "ஜனாதிபதி ஆட்சி",
        "to": "30 Jan 1988",
        "from": "27 Jan 1989",
        "party_name": ""
    },
    {
        "id": "17",
        "name": "ஜானகி ராமச்சந்திரன்",
        "to": "07 Jan 1988",
        "from": "30 Jan 1988",
        "party_name": "அதிமுக"
    },
    {
        "id": "18",
        "name": "வி.ஆர்.நெடுஞ்செழியன்",
        "to": "24 Dec 1987",
        "from": "07 Jan 1988",
        "party_name": "அதிமுக"
    },
    {
        "id": "19",
        "name": "எம்.ஜி. ராமச்சந்திரன்",
        "to": "10 Feb 1985",
        "from": "24 Dec 1987",
        "party_name": "அதிமுக"
    },
    {
        "id": "20",
        "name": "எம்.ஜி.ராமச்சந்திரன்",
        "to": "09 Jun 1980",
        "from": "15 Nov 1984",
        "party_name": "அதிமுக"
    },
    {
        "id": "21",
        "name": "ஜனாதிபதி ஆட்சி",
        "to": "17 Feb 1980",
        "from": "09 Jun 1980",
        "party_name": ""
    },
    {
        "id": "22",
        "name": "எம்.ஜி.ராமச்சந்திரன்",
        "to": "01 Jul 1977",
        "from": "17 Feb 1980",
        "party_name": "அதிமுக"
    },
    {
        "id": "23",
        "name": "ஜனாதிபதி ஆட்சி",
        "to": "31 Jan 1976",
        "from": "30 Jun 1977",
        "party_name": ""
    },
    {
        "id": "24",
        "name": "மு.கருணாநிதி",
        "to": "15 Mar 1971",
        "from": "31 Jan 1976",
        "party_name": "திமுக"
    },
    {
        "id": "25",
        "name": "மு.கருணாநிதி",
        "to": "10 Feb 1969",
        "from": "04 Jan 1971",
        "party_name": "திமுக"
    },
    {
        "id": "26",
        "name": "வி.ஆர். நெடுஞ்செழியன்",
        "to": "03 Feb 1969",
        "from": "10 Feb 1969",
        "party_name": "திமுக"
    },
    {
        "id": "27",
        "name": "சி.என்.அண்ணாதுரை",
        "to": "01 Mar 1967",
        "from": "03 Feb 1969",
        "party_name": "திமுக"
    },
    {
        "id": "28",
        "name": "சி.என். அண்ணாதுரை",
        "to": "06 Mar 1967",
        "from": "14 Jan 1969",
        "party_name": "திமுக"
    },
    {
        "id": "29",
        "name": "எம். பக்தவச்சலம்",
        "to": "02 Oct 1963",
        "from": "06 Mar 1967",
        "party_name": "காங்."
    },
    {
        "id": "30",
        "name": "கு. காமராஜ்",
        "to": "15 Mar 1962",
        "from": "02 Oct 1963",
        "party_name": "காங்."
    },
    {
        "id": "31",
        "name": "கு. காமராஜ்",
        "to": "13 Apr 1957",
        "from": "01 Mar 1962",
        "party_name": "காங்."
    },
    {
        "id": "32",
        "name": "கு. காமராஜ்",
        "to": "13 Apr 1954",
        "from": "31 Mar 1957",
        "party_name": "காங்."
    },
    {
        "id": "33",
        "name": "சி. ராஜகோபாலச்சாரி",
        "to": "10 Apr 1952",
        "from": "13 Apr 1954",
        "party_name": "காங்."
    },
    {
        "id": "34",
        "name": "பி.எஸ்.குமாரசாமி ராஜா",
        "to": "26 Jan 1950",
        "from": "10 Apr 1952",
        "party_name": "காங்."
    },
    {
        "id": "35",
        "name": "பி.எஸ். குமாரசாமி ராஜா",
        "to": "06 Apr 1949",
        "from": "26 Jan 1950",
        "party_name": "காங்."
    },
    {
        "id": "36",
        "name": "ஓ.பி. ராமசாமி ரெட்டியார்",
        "to": "23 Mar 1947",
        "from": "06 Apr 1949",
        "party_name": "காங்."
    },
    {
        "id": "37",
        "name": "தெங்குட்டுரி பிரகாசம்",
        "to": "30 Apr 1946",
        "from": "23 Mar 1947",
        "party_name": "காங்."
    },
    {
        "id": "38",
        "name": "ஜனாதிபதி ஆட்சி",
        "to": "29 Oct 1939",
        "from": "30 Apr 1946",
        "party_name": "காங்."
    },
    {
        "id": "39",
        "name": "சி. ராஜகோபாலாச்சாரி",
        "to": "14 Jul 1937",
        "from": "29 Oct 1939",
        "party_name": "காங்."
    },
    {
        "id": "40",
        "name": "கர்மா வெங்கட ரெட்டி நாயுடு",
        "to": "01 Apr 1937",
        "from": "14 Jul 1937",
        "party_name": "Interim provisional ministry"
    },
    {
        "id": "41",
        "name": "பொப்பிலி ராஜா",
        "to": "24 Aug 1936",
        "from": "01 Apr 1937",
        "party_name": "Justice Party"
    },
    {
        "id": "42",
        "name": "பி.டி.ராஜன்",
        "to": "04 Apr 1936",
        "from": "24 Aug 1936",
        "party_name": "Justice Party"
    },
    {
        "id": "43",
        "name": "பொப்பிலி ராஜா",
        "to": "05 Nov 1934",
        "from": "04 Apr 1936",
        "party_name": "Justice Party"
    },
    {
        "id": "44",
        "name": "பொப்பிலி ராஜா",
        "to": "05 Nov 1932",
        "from": "05 Nov 1934",
        "party_name": "Justice Party"
    },
    {
        "id": "45",
        "name": "பி. முனுசாமி நாயுடு",
        "to": "27 Oct 1930",
        "from": "05 Nov 1932",
        "party_name": "Justice Party"
    },
    {
        "id": "46",
        "name": "பி.சுப்பராயன்",
        "to": "04 Dec 1926",
        "from": "27 Oct 1930",
        "party_name": "Unaffiliated"
    },
    {
        "id": "47",
        "name": "பனகல் ராஜா",
        "to": "19 Nov 1923",
        "from": "04 Dec 1926",
        "party_name": "Justice Party"
    },
    {
        "id": "48",
        "name": "பனகல் ராஜா",
        "to": "11 Jul 1921",
        "from": "11 Sep 1923",
        "party_name": "Justice Party"
    },
    {
        "id": "49",
        "name": "சுப்பராயலு ரெட்டியார்",
        "to": "17 Dec 1920",
        "from": "11 Jul 1921",
        "party_name": "Justice Party"
    }
]

for (let values of past_leaders) {
    var tr = document.createElement('tr');

    // create table cell elements and set their content
    var td1 = document.createElement('td');
    td1.setAttribute('scope', 'row');
    td1.textContent = values.id;

    var td2 = document.createElement('td');
    var profileMainDiv = document.createElement('div');
    profileMainDiv.setAttribute('class', 'profile-main');

    var partiesDiv = document.createElement('div');
    partiesDiv.setAttribute('class', 'parties');

    var pastLeaderDiv = document.createElement('div');
    pastLeaderDiv.setAttribute('id', 'pastleader');
    pastLeaderDiv.setAttribute('class', 'fontsidepro');
    pastLeaderDiv.innerHTML = `<p>${values.name}</p>`;


    var backsideproDiv = document.createElement('div');
    backsideproDiv.setAttribute('class', 'backsidepro');
    backsideproDiv.innerHTML = '<p></p><img src="../../assets/images/ministers/mk stalin.png" alt="error image"><button><a href="../portfolio/profile/profile.html">விவரம்</a></button>';

    partiesDiv.appendChild(pastLeaderDiv);
    partiesDiv.appendChild(backsideproDiv);
    profileMainDiv.appendChild(partiesDiv);
    td2.appendChild(profileMainDiv);

    var td3 = document.createElement('td');
    td3.setAttribute('class', 'date');
    td3.textContent = values.to;

    var td4 = document.createElement('td');
    td4.setAttribute('class', 'date');
    td4.textContent = values.from;

    // Create table cell
    var td5 = document.createElement('td');
    var nameImgDiv = document.createElement('div');
    nameImgDiv.setAttribute('class', 'name-img');

    var partyImg = document.createElement('img');
    partyImg.setAttribute("alt", values.party_name)

    var partyName = document.createElement('p');
    partyName.innerText = values.party_name;

    if (values.party_name === "திமுக") {
        partyImg.setAttribute("src", "../../assets/images/flages/dmk-logo.png");
    } else if (values.party_name === "ஐ.ஏ.ஏ.டி.கே") {
        partyImg.setAttribute("src", "../../assets/images/flages/aiadmk-logo.png");
    } else if (values.party_name === "பி.ஜே.பி") {
        partyImg.setAttribute("src", "../../assets/images/flages/bjp-logo.png");
    } else if (values.party_name === "காங்.ரா") {
        partyImg.setAttribute("src", "../../assets/images/flages/congress-logo.png");
    } else if (values.party_name === "மக்கள் நீதி மய்யம் கட்சி") {
        partyImg.setAttribute("src", "../../assets/images/flages/mnmk-logo.png");
    }

    nameImgDiv.appendChild(partyImg);
    nameImgDiv.appendChild(partyName);
    td5.appendChild(nameImgDiv);

    td5.appendChild(nameImgDiv);

    // add table cell elements to table row element
    tr.appendChild(td1);
    tr.appendChild(td2);
    tr.appendChild(td3);
    tr.appendChild(td4);
    tr.appendChild(td5);

    document.querySelector(".table_body").append(tr);
}



const sortTableByDate = () => {
    const table = document.getElementById('my-table');
    const rows = Array.from(table.getElementsByTagName('tr'));
    const sortedRows = rows.sort((row1, row2) => {
        const date1 = new Date(row1.cells[3].textContent);
        const date2 = new Date(row2.cells[3].textContent);
        return date1 - date2;
    });
    table.tBodies[0].append(...sortedRows);
};

document.getElementById('sort-date').addEventListener('click', sortTableByDate);


let table = document.querySelector("table");
let rows = table.rows;

let sortNameButton = document.querySelector("#sortName");
sortNameButton.addEventListener("click", () => {
    let sortedRows = Array.from(rows)
        .slice(1)
        .sort((a, b) => {
            let nameA = a.cells[1].textContent;
            let nameB = b.cells[1].textContent;
            return nameA.localeCompare(nameB);
        });

    table.tBodies[0].append(...sortedRows);
});


window.onload = function () {
    let searchBox = document.querySelector('#searchbar');
    searchBox.addEventListener('input', function () {
        let filterValue = searchBox.value.toLocaleLowerCase();
        let rows = document.querySelectorAll("table tr");
        for (let i = 1; i < rows.length; i++) { // start from index 1 to skip the header row
            let row = rows[i];
            let name = row.children[1].textContent.toLocaleLowerCase();
            let party = row.children[3].textContent.toLocaleLowerCase();
            let leader_name = row.children[2].textContent.toLocaleLowerCase();
            if (name.includes(filterValue) || party.includes(filterValue) || leader_name.includes(filterValue)) {
                row.style.display = "table-row";
            } else {
                row.style.display = "none";
            }
        }
    });
};